import{r as a,l as Ce,R as J,I as Q,m as Re,n as Ne,o as Te,j as A,G as Ve}from"./index-b0f4c2cc.js";import{D as Fe}from"./Database-4d2494cf.js";import{P as pe}from"./Player-b1422294.js";import{B as ke}from"./Button-b847b226.js";var Me=Object.defineProperty,Le=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,U=(r,e,t)=>e in r?Me(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,k=(r,e)=>{for(var t in e||(e={}))de.call(e,t)&&U(r,t,e[t]);if(R)for(var t of R(e))ye.call(e,t)&&U(r,t,e[t]);return r},Ke=(r,e)=>Le(r,Be(e)),We=(r,e)=>{var t={};for(var n in r)de.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&R)for(var n of R(r))e.indexOf(n)<0&&ye.call(r,n)&&(t[n]=r[n]);return t};const qe={type:"text",size:"sm",__staticSelector:"TextInput"},_e=a.forwardRef((r,e)=>{const t=Ce("TextInput",qe,r),{inputProps:n,wrapperProps:o}=t,c=We(t,["inputProps","wrapperProps"]);return J.createElement(Q.Wrapper,k({},o),J.createElement(Q,Ke(k(k({},n),c),{ref:e})))});_e.displayName="@mantine/core/TextInput";var He=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,c;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(c=Object.keys(e),n=c.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[o]))return!1;for(o=n;o--!==0;){var i=c[o];if(!r(e[i],t[i]))return!1}return!0}return e!==e&&t!==t};const Y=Re(He);function L(r){return r===null||typeof r!="object"?{}:Object.keys(r).reduce((e,t)=>{const n=r[t];return n!=null&&n!==!1&&(e[t]=n),e},{})}var ze=Object.defineProperty,Z=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,x=(r,e,t)=>e in r?ze(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Je=(r,e)=>{for(var t in e||(e={}))Ge.call(e,t)&&x(r,t,e[t]);if(Z)for(var t of Z(e))Xe.call(e,t)&&x(r,t,e[t]);return r};function Oe(r,e){if(e===null||typeof e!="object")return{};const t=Je({},e);return Object.keys(e).forEach(n=>{n.includes(`${String(r)}.`)&&delete t[n]}),t}const Qe="__MANTINE_FORM_INDEX__";function ee(r,e){return e?typeof e=="boolean"?e:Array.isArray(e)?e.includes(r.replace(/[.][0-9]/g,`.${Qe}`)):!1:!1}function re(r,e,t){typeof t.value=="object"&&(t.value=E(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||e==="__proto__"?Object.defineProperty(r,e,t):r[e]=t.value}function E(r){if(typeof r!="object")return r;var e=0,t,n,o,c=Object.prototype.toString.call(r);if(c==="[object Object]"?o=Object.create(r.__proto__||null):c==="[object Array]"?o=Array(r.length):c==="[object Set]"?(o=new Set,r.forEach(function(i){o.add(E(i))})):c==="[object Map]"?(o=new Map,r.forEach(function(i,p){o.set(E(p),E(i))})):c==="[object Date]"?o=new Date(+r):c==="[object RegExp]"?o=new RegExp(r.source,r.flags):c==="[object DataView]"?o=new r.constructor(E(r.buffer)):c==="[object ArrayBuffer]"?o=r.slice(0):c.slice(-6)==="Array]"&&(o=new r.constructor(r)),o){for(n=Object.getOwnPropertySymbols(r);e<n.length;e++)re(o,n[e],Object.getOwnPropertyDescriptor(r,n[e]));for(e=0,n=Object.getOwnPropertyNames(r);e<n.length;e++)Object.hasOwnProperty.call(o,t=n[e])&&o[t]===r[t]||re(o,t,Object.getOwnPropertyDescriptor(r,t))}return o||r}function be(r){return typeof r!="string"?[]:r.split(".")}function N(r,e,t){const n=be(r);if(n.length===0)return t;const o=E(t);if(n.length===1)return o[n[0]]=e,o;let c=o[n[0]];for(let i=1;i<n.length-1;i+=1){if(c===void 0)return o;c=c[n[i]]}return c[n[n.length-1]]=e,o}function P(r,e){const t=be(r);if(t.length===0||typeof e!="object"||e===null)return;let n=e[t[0]];for(let o=1;o<t.length&&n!==void 0;o+=1)n=n[t[o]];return n}function te(r){const e=L(r);return{hasErrors:Object.keys(e).length>0,errors:e}}function B(r,e,t="",n={}){return typeof r!="object"||r===null?n:Object.keys(r).reduce((o,c)=>{const i=r[c],p=`${t===""?"":`${t}.`}${c}`,f=P(p,e);let d=!1;return typeof i=="function"&&(o[p]=i(f,e,p)),typeof i=="object"&&Array.isArray(f)&&(d=!0,f.forEach((O,b)=>B(i,e,`${p}.${b}`,o))),typeof i=="object"&&typeof f=="object"&&f!==null&&(d||B(i,e,p,o)),o},n)}function K(r,e){return te(typeof r=="function"?r(e):B(r,e))}function C(r,e,t){if(typeof r!="string")return{hasError:!1,error:null};const n=K(e,t),o=Object.keys(n.errors).find(c=>r.split(".").every((i,p)=>i===c.split(".")[p]));return{hasError:!!o,error:o?n.errors[o]:null}}function Ue(r,{from:e,to:t},n){const o=P(r,n);if(!Array.isArray(o))return n;const c=[...o],i=o[e];return c.splice(e,1),c.splice(t,0,i),N(r,c,n)}var Ye=Object.defineProperty,ne=Object.getOwnPropertySymbols,Ze=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,oe=(r,e,t)=>e in r?Ye(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,er=(r,e)=>{for(var t in e||(e={}))Ze.call(e,t)&&oe(r,t,e[t]);if(ne)for(var t of ne(e))xe.call(e,t)&&oe(r,t,e[t]);return r};function rr(r,{from:e,to:t},n){const o=`${r}.${e}`,c=`${r}.${t}`,i=er({},n);return Object.keys(n).every(p=>{let f,d;if(p.startsWith(o)&&(f=p,d=p.replace(o,c)),p.startsWith(c)&&(f=p.replace(c,o),d=p),f&&d){const O=i[f],b=i[d];return b===void 0?delete i[f]:i[f]=b,O===void 0?delete i[d]:i[d]=O,!1}return!0}),i}function tr(r,e,t){const n=P(r,t);return Array.isArray(n)?N(r,n.filter((o,c)=>c!==e),t):t}var nr=Object.defineProperty,se=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,ce=(r,e,t)=>e in r?nr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cr=(r,e)=>{for(var t in e||(e={}))or.call(e,t)&&ce(r,t,e[t]);if(se)for(var t of se(e))sr.call(e,t)&&ce(r,t,e[t]);return r};function ie(r,e){const t=r.substring(e.length+1).split(".")[0];return parseInt(t,10)}function le(r,e,t,n){if(e===void 0)return t;const o=`${String(r)}`;let c=t;n===-1&&(c=Oe(`${o}.${e}`,c));const i=cr({},c),p=new Set;return Object.entries(c).filter(([f])=>{if(!f.startsWith(`${o}.`))return!1;const d=ie(f,o);return Number.isNaN(d)?!1:d>=e}).forEach(([f,d])=>{const O=ie(f,o),b=f.replace(`${o}.${O}`,`${o}.${O+n}`);i[b]=d,p.add(b),p.has(f)||delete i[f]}),i}function ir(r,e,t,n){const o=P(r,n);if(!Array.isArray(o))return n;const c=[...o];return c.splice(typeof t=="number"?t:c.length,0,e),N(r,c,n)}function ue(r,e){const t=Object.keys(r);if(typeof e=="string"){const n=t.filter(o=>o.startsWith(`${e}.`));return r[e]||n.some(o=>r[o])||!1}return t.some(n=>r[n])}function lr(r){return e=>{if(!e)r(e);else if(typeof e=="function")r(e);else if(typeof e=="object"&&"nativeEvent"in e){const{currentTarget:t}=e;t instanceof HTMLInputElement?t.type==="checkbox"?r(t.checked):r(t.value):(t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)&&r(t.value)}else r(e)}}var ur=Object.defineProperty,fr=Object.defineProperties,ar=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,pr=Object.prototype.hasOwnProperty,dr=Object.prototype.propertyIsEnumerable,ae=(r,e,t)=>e in r?ur(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g=(r,e)=>{for(var t in e||(e={}))pr.call(e,t)&&ae(r,t,e[t]);if(fe)for(var t of fe(e))dr.call(e,t)&&ae(r,t,e[t]);return r},M=(r,e)=>fr(r,ar(e));function yr({initialValues:r={},initialErrors:e={},initialDirty:t={},initialTouched:n={},clearInputErrorOnChange:o=!0,validateInputOnChange:c=!1,validateInputOnBlur:i=!1,transformValues:p=d=>d,validate:f}={}){const[d,O]=a.useState(n),[b,S]=a.useState(t),[y,j]=a.useState(r),[W,v]=a.useState(L(e)),T=a.useRef(r),q=s=>{T.current=s},H=a.useCallback(()=>O({}),[]),me=s=>{const l=s?g(g({},y),s):y;q(l),S({})},V=a.useCallback(s=>v(l=>L(typeof s=="function"?s(l):s)),[]),F=a.useCallback(()=>v({}),[]),z=a.useCallback(()=>{j(r),F(),q(r),S({}),H()},[]),$=a.useCallback((s,l)=>V(u=>M(g({},u),{[s]:l})),[]),I=a.useCallback(s=>V(l=>{if(typeof s!="string")return l;const u=g({},l);return delete u[s],u}),[]),D=a.useCallback(s=>S(l=>{if(typeof s!="string")return l;const u=Oe(s,l);return delete u[s],u}),[]),G=a.useCallback((s,l)=>{const u=ee(s,c);D(s),O(_=>M(g({},_),{[s]:!0})),j(_=>{const h=N(s,l,_);if(u){const m=C(s,f,h);m.hasError?$(s,m.error):I(s)}return h}),!u&&o&&$(s,null)},[]),Pe=a.useCallback(s=>{j(l=>{const u=typeof s=="function"?s(l):s;return g(g({},l),u)}),o&&F()},[]),ge=a.useCallback((s,l)=>{D(s),j(u=>Ue(s,l,u)),v(u=>rr(s,l,u))},[]),je=a.useCallback((s,l)=>{D(s),j(u=>tr(s,l,u)),v(u=>le(s,l,u,-1))},[]),ve=a.useCallback((s,l,u)=>{D(s),j(_=>ir(s,l,u,_)),v(_=>le(s,u,_,1))},[]),X=a.useCallback(()=>{const s=K(f,y);return v(s.errors),s},[y,f]),we=a.useCallback(s=>{const l=C(s,f,y);return l.hasError?$(s,l.error):I(s),l},[y,f]),Ee=(s,{type:l="input",withError:u=!0,withFocus:_=!0}={})=>{const m={onChange:lr(w=>G(s,w))};return u&&(m.error=W[s]),l==="checkbox"?m.checked=P(s,y):m.value=P(s,y),_&&(m.onFocus=()=>O(w=>M(g({},w),{[s]:!0})),m.onBlur=()=>{if(ee(s,i)){const w=C(s,f,y);w.hasError?$(s,w.error):I(s)}}),m},$e=(s,l)=>u=>{u==null||u.preventDefault();const _=X();_.hasErrors?l==null||l(_.errors,y,u):s==null||s(p(y),u)},he=s=>p(s||y),Se=a.useCallback(s=>{s.preventDefault(),z()},[]),Ie=s=>{if(s){const u=P(s,b);if(typeof u=="boolean")return u;const _=P(s,y),h=P(s,T.current);return!Y(_,h)}return Object.keys(b).length>0?ue(b):!Y(y,T.current)},De=a.useCallback(s=>ue(d,s),[d]),Ae=a.useCallback(s=>s?!C(s,f,y).hasError:!K(f,y).hasErrors,[y,f]);return{values:y,errors:W,setValues:Pe,setErrors:V,setFieldValue:G,setFieldError:$,clearFieldError:I,clearErrors:F,reset:z,validate:X,validateField:we,reorderListItem:ge,removeListItem:je,insertListItem:ve,getInputProps:Ee,onSubmit:$e,onReset:Se,isDirty:Ie,isTouched:De,setTouched:O,setDirty:S,resetTouched:H,resetDirty:me,isValid:Ae,getTransformedValues:he}}function _r(r){return e=>{const t=r.safeParse(e);if(t.success)return{};const n={};return t.error.errors.forEach(o=>{n[o.path.join(".")]=o.message}),n}}const gr=async r=>{try{const e=await r.request.json(),t=pe.safeParse(e);if(t.success){const o=await new Fe().players.add(t.data);return Ne(`../${o}`)}}catch(e){console.error(e)}return null},jr=({})=>{const r=yr({validate:_r(pe),initialValues:{name:""},validateInputOnBlur:!0}),e=Te();return A.jsxs("form",{onSubmit:r.onSubmit(t=>{e(t,{method:"post",encType:"application/json"})}),children:[A.jsx(_e,{name:"name",label:"Name",description:"Name used to identify the player",withAsterisk:!0,...r.getInputProps("name")}),A.jsx(Ve,{position:"right",children:A.jsx(ke,{type:"submit",children:"Create"})})]})};export{jr as Component,gr as action};
